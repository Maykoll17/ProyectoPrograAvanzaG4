@model ProyectoProgramacion.Models.EF.Pago
@{
    ViewBag.Title = "Detalle del Pago";
    Layout = "~/Views/Shared/_LayoutExterno.cshtml";

}
<br />
<br />
<br />
<br />

<div class="container mt-5">
    <div class="card shadow-lg border-0 rounded-4">
        <div class="card-header bg-primary text-white rounded-top-4">
            <h4 class="mb-0">Detalle del Pago #@Model.ID_Pago</h4>
        </div>

        <div class="card-body">
            <dl class="row mb-0">
                <dt class="col-sm-3">Contrato</dt>
                <dd class="col-sm-9">@Model.ID_Contrato</dd>

                <dt class="col-sm-3">Usuario</dt>
                <dd class="col-sm-9">
                    @(Model.Contrato != null && Model.Contrato.Usuario != null
                        ? (Model.Contrato.Usuario.Nombre + " (" + Model.Contrato.Usuario.Cedula + ")")
                        : "—")
                </dd>

                <dt class="col-sm-3">Fecha</dt>
                <dd class="col-sm-9">@Model.Fecha_Pago.ToString("dd/MM/yyyy")</dd>

                <dt class="col-sm-3">Monto</dt>
                <dd class="col-sm-9">₡@Model.Monto_Pago.ToString("N2")</dd>

                <dt class="col-sm-3">Tipo pago</dt>
                <dd class="col-sm-9">
                    @{
                        var estado = (Model.Metodo_Pago ?? "").Trim();
                        var badge = estado.ToLower() == "pagado" ? "success"
                                   : estado.ToLower() == "rechazado" ? "danger"
                                   : "warning text-dark";
                    }
                    <span class="badge bg-@badge">@((string.IsNullOrEmpty(estado) ? "Pendiente" : estado))</span>
                </dd>

                <dt class="col-sm-3">Comprobante</dt>
                <dd class="col-sm-9">
                    @if (!string.IsNullOrWhiteSpace(Model.Comprobante_URL))
                    {
                        <a href="@Url.Content(Model.Comprobante_URL)" target="_blank" class="btn btn-outline-secondary btn-sm mb-2">Abrir comprobante</a>
                        <div>
                            <img src="@Url.Content(Model.Comprobante_URL)" alt="Comprobante" class="img-thumbnail" style="max-width:240px;" />
                        </div>
                    }
                    else
                    {
                        <span class="text-muted">No adjuntado</span>
                    }
                </dd>
            </dl>

            <div class="mt-4">
                <a href="javascript:history.back()" class="btn btn-outline-secondary">Volver</a>
                @Html.ActionLink("Ir a Mis Pagos", "Index", "Pagos", null, new { @class = "btn btn-secondary ms-2" })
            </div>
        </div>
    </div>
</div>

